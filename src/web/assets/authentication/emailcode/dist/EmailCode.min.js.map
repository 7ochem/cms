{"version":3,"sources":["authentication/emailcode/src/EmailCode.js"],"names":["EmailCode","constructor","$verificationCode","$","this","Craft","validateOnInput","registerStepHandler","prepareData","bind","validate","val","length","verificationCode","onInput","ev","LoginForm","clearErrors","error"],"mappings":"AAAA,aACA,MAAMA,UAANC,cACIA,KAAWC,kBAAGC,EAAA,qBACVC,KAAKF,iBAAsB,EAC3BG,MAAKC,UAALC,oBAAAH,KAAAI,YAAAC,KAAAL,OAEHM,WACDA,OAAW,IACkBN,KAAKF,kBAAkBS,MADzCC,QACDC,MAAAA,EAAgB,MAAQX,oCAG7BY,QAAAC,GAIGX,KAAKE,kBAAuC,IAApBF,KAAKM,YAH1BL,MAAPW,UAAAC,cAOJT,YAAAO,GACJ,MAAAG,EAAAd,KAAAM,WACA,OAAA,IAAAQ,GACAd,KAAAE,iBAAA,EACAY,IAOQd,KAAKE,iBAAkB,EANfS,CACFG,oBAANd,KAAAF,kBAAAS,SAGI,IAAAX","file":"EmailCode.min.js","sourcesContent":["\"use strict\";\nclass EmailCode {\n    constructor() {\n        this.$verificationCode = $('#verificationCode');\n        this.validateOnInput = false;\n        Craft.LoginForm.registerStepHandler(this.prepareData.bind(this));\n    }\n    validate() {\n        const verificationCode = this.$verificationCode.val();\n        if (verificationCode.length === 0) {\n            return Craft.t('app', 'Please enter a verification code');\n        }\n        return true;\n    }\n    onInput(ev) {\n        if (this.validateOnInput && this.validate() === true) {\n            Craft.LoginForm.clearErrors();\n        }\n    }\n    /**\n     * Prepare the request data.\n     *\n     * @param ev\n     */\n    prepareData(ev) {\n        const error = this.validate();\n        if (error !== true) {\n            this.validateOnInput = true;\n            return error;\n        }\n        this.validateOnInput = false;\n        return {\n            \"verification-code\": this.$verificationCode.val(),\n        };\n    }\n}\nnew EmailCode();\n"]}