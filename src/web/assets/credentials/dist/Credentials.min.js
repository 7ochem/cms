"use strict";class Credentials{constructor(){this.$loginNameInput=$("#loginName"),this.$passwordInput=$("#password"),this.validateOnInput=!1,Craft.LoginForm.registerStepHandler(this.prepareData.bind(this)),new Craft.PasswordInput(this.$passwordInput,{onToggleInput:t=>{this.$passwordInput.off("input"),this.$passwordInput=t,this.$passwordInput.on("input",this.onInput.bind(this))}}),this.$loginNameInput.on("input",this.onInput.bind(this)),this.$passwordInput.on("input",this.onInput.bind(this))}validate(){const t=this.$loginNameInput.val();if(0===t.length)return window.useEmailAsUsername?Craft.t("app","Invalid email."):Craft.t("app","Invalid username or email.");if(window.useEmailAsUsername&&!t.match(".+@.+..+"))return Craft.t("app","Invalid email.");const a=this.$passwordInput.val().length;return a<window.minPasswordLength?Craft.t("yii","{attribute} should contain at least {min, number} {min, plural, one{character} other{characters}}.",{attribute:Craft.t("app","Password"),min:window.minPasswordLength}):!(a>window.maxPasswordLength)||Craft.t("yii","{attribute} should contain at most {max, number} {max, plural, one{character} other{characters}}.",{attribute:Craft.t("app","Password"),max:window.maxPasswordLength})}onInput(t){this.validateOnInput&&!0===this.validate()&&Craft.LoginForm.clearErrors()}prepareData(t){const a=this.validate();return!0!==a?(this.validateOnInput=!0,a):(this.validateOnInput=!1,{loginName:this.$loginNameInput.val(),password:this.$passwordInput.val()})}}new Credentials;
//# sourceMappingURL=Credentials.min.js.map
