{"version":3,"sources":["login/src/LoginForm.js"],"names":["LoginForm","constructor","disabled","Craft","AuthenticationChainHandler","this","event","$loginForm","clearErrors","clearMessages","additionalData","$rememberMeCheckbox","prop","isExistingChain","loginName","$username","val","preventDefault","trigger","$pendingSpinner","length","$errors","$messages","$","$spinner","$submit","$cancelRecover","$recoverAccount","showError","error","appendTo","velocity","showMessage","message","empty","enableForm","addClass","fadeTo","disableForm","removeClass","isDisabled"],"mappings":"AAAA,aACA,MAAMA,UAANC,cACIA,KAAWC,UAAG,EAGVC,MAAMC,2BAA6B,IAAIA,2BAA2BC,MAAlEF,KAAMC,WAAAA,GAAAA,SAANE,IACKC,KAAAA,cACIC,KAAAA,gBACAC,IAAAA,EAAL,CACIC,WAAiBL,KAAAM,oBAAAC,KAAA,YAArBT,MAAAC,2BAAAS,oBAIIH,EAAeI,UAAYT,KAAKU,UAAUC,OAA1CN,MAAAA,2BAAgCK,iBAAhCT,EAAAI,GACHJ,EAAAW,mBACKb,KAAAA,gBAAAA,QACAa,KAAAA,WAANC,QAAA,UAEJX,iBAASY,OAAgBC,EAAAA,eACrBC,cAAKd,OAAWW,EAAhB,iBACHI,gBAAA,OAAAC,EAAA,mBACJC,eAAA,OAAAD,EAAA,YAKDJ,sBAAwB,OAAOI,EAAE,oBAJjCE,cAAiB,OAAAF,EAAA,WAAEZ,0BAAA,OAAAY,EAAA,eAA0BR,gBAAA,OAAAQ,EAAA,yBAQ7CG,qBAAuB,OAAOH,EAAE,mBAPhCI,sBAAc,OAAAJ,EAAA,oBACkCK,UAAAC,GAc5CxB,KAAKG,cAbLgB,EAAAA,6BAAWK,EAAA,QAAWC,SAAAzB,KAATgB,SAiBRU,SAAS,UAfoBC,YAAAC,GAuBlC5B,KAAKI,gBAtBLE,EAAAA,6BAAsBsB,EAAA,QAAWH,SAAAzB,KAATiB,WA0BnBS,SAAS,UAxBmCvB,cAgCjDH,KAAKgB,QAAQa,QA3BrBzB,gBACAJ,KAAAiB,UAAAY,QAoCIC,aAnCAP,KAAUC,QAAOO,SAAA,UACb/B,KAAKG,SAAL4B,SAAA,UACE/B,KAAAE,WAAA8B,OAAA,IAAA,GAGGN,KAHL7B,UAAA,EAKJoC,cACJjC,KAAAoB,QAAAc,YAAA,UACAlC,KAAAmB,SAAAe,YAAA,UACAlC,KAAAE,WAAA8B,OAAA,IAAA,IACAhC,KAAAH,UAAA,EAoCIsC,aAnCAR,OAAYC,KAAAA,UAER,IAAAjC","file":"LoginForm.min.js","sourcesContent":["\"use strict\";\nclass LoginForm {\n    constructor() {\n        this.disabled = false;\n        // todo allow constructor to pass in other login handlers\n        Craft.AuthenticationChainHandler = new AuthenticationChainHandler(this);\n        this.$loginForm.on('submit', (event) => {\n            this.clearErrors();\n            this.clearMessages();\n            let additionalData = {\n                rememberMe: this.$rememberMeCheckbox.prop('checked'),\n            };\n            if (!Craft.AuthenticationChainHandler.isExistingChain()) {\n                additionalData.loginName = this.$username.val();\n            }\n            Craft.AuthenticationChainHandler.handleFormSubmit(event, additionalData);\n            event.preventDefault();\n        });\n        if (this.$pendingSpinner.length) {\n            this.$loginForm.trigger('submit');\n        }\n    }\n    get $loginForm() { return $('#login-form'); }\n    get $errors() { return $('#login-errors'); }\n    get $messages() { return $('#login-messages'); }\n    get $spinner() { return $('#spinner'); }\n    get $pendingSpinner() { return $('#spinner-pending'); }\n    get $submit() { return $('#submit'); }\n    get $rememberMeCheckbox() { return $('#rememberMe'); }\n    get $username() { return $('#username-field input'); }\n    get $cancelRecover() { return $('#cancel-recover'); }\n    get $recoverAccount() { return $('#recover-account'); }\n    /**\n     * Show an error.\n     *\n     * @param error\n     */\n    showError(error) {\n        this.clearErrors();\n        $('<p style=\"display: none;\">' + error + '</p>')\n            .appendTo(this.$errors)\n            // @ts-ignore\n            .velocity('fadeIn');\n    }\n    /**\n     * Show a message.\n     *\n     * @param message\n     */\n    showMessage(message) {\n        this.clearMessages();\n        $('<p style=\"display: none;\">' + message + '</p>')\n            .appendTo(this.$messages)\n            // @ts-ignore\n            .velocity('fadeIn');\n    }\n    /**\n     * Clear all the errors.\n     *\n     * @protected\n     */\n    clearErrors() {\n        this.$errors.empty();\n    }\n    /**\n     * Clear all the messages.\n     *\n     * @protected\n     */\n    clearMessages() {\n        this.$messages.empty();\n    }\n    enableForm() {\n        this.$submit.addClass('active');\n        this.$spinner.addClass('hidden');\n        this.$loginForm.fadeTo(100, 1);\n        this.disabled = false;\n    }\n    disableForm() {\n        this.$submit.removeClass('active');\n        this.$spinner.removeClass('hidden');\n        this.$loginForm.fadeTo(100, 0.2);\n        this.disabled = true;\n    }\n    isDisabled() {\n        return this.disabled;\n    }\n}\nnew LoginForm();\n"]}