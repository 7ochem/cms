(function(e){function t(t){for(var n,o,i=t[0],a=t[1],s=t[2],c=0,p=[];c<i.length;c++)o=i[c],Object.prototype.hasOwnProperty.call(u,o)&&u[o]&&p.push(u[o][0]),u[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);d&&d(t);while(p.length)p.shift()();return l.push.apply(l,s||[]),r()}function r(){for(var e,t=0;t<l.length;t++){for(var r=l[t],n=!0,i=1;i<r.length;i++){var a=r[i];0!==u[a]&&(n=!1)}n&&(l.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},u={app:0},l=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var d=a;l.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0c1e":function(e,t,r){"use strict";var n=r("980e"),u=r.n(n);u.a},"340f":function(e,t,r){"use strict";var n=r("b653"),u=r.n(n);u.a},"56d7":function(e,t,r){"use strict";r.r(t);r("4de4"),r("d81d"),r("d3b7");var n=r("53ca"),u=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("8bbf")),l=r.n(u),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vue-condition-builder"},[e._t("default",[r("condition-builder-group",e._b({attrs:{query:e.query},on:{"update:query":function(t){e.query=t}}},"condition-builder-group",e.conditionBuilderProps,!1))],null,e.conditionBuilderProps),r("pre",[e._v(e._s(JSON.stringify(this.query,null,2)))])],2)},i=[],a=(r("4160"),r("a9e3"),r("159b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"condition-builder-group",class:e.classes},[r("div",[r("div",{staticClass:"condition-builder-group-header"},[r("div",{staticClass:"tw-flex-grow"},[r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.query.logicalOperator,expression:"query.logicalOperator"}],staticClass:"condition-builder-match-type-select",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.query,"logicalOperator",t.target.multiple?r:r[0])}}},e._l(e.labels.matchTypes,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),0)])]),r("div",[e.depth>1?[r("a",{staticClass:"delete icon tw-p-3",attrs:{title:e.labels.removeGroup,role:"button",href:"#"},on:{click:e.remove}})]:e._e()],2)]),r("condition-builder-children",e._b({},"condition-builder-children",e.$props,!1)),r("div",{staticClass:"condition-builder-group-footer"},[e.depth<e.maxDepth?[r("select",{staticClass:"add-child-select",on:{change:function(t){return e.onChangeAdd(t)}}},[r("option",{attrs:{selected:"",value:""}},[e._v("Add...")]),r("option",{attrs:{value:"addRule"},on:{click:e.addRule}},[e._v(e._s(e.labels.addRule))]),r("option",{attrs:{value:"addGroup"},on:{click:e.addGroup}},[e._v(e._s(e.labels.addGroup))])])]:e._e(),e.depth==e.maxDepth?[r("button",{staticClass:"add-rule-btn",attrs:{type:"button"},on:{click:e.addRule}},[e._v("\n          "+e._s(e.labels.addRule)+"\n        ")])]:e._e()],2)],1)])}),s=[],d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},c=[],p=(r("a434"),r("b64b"),function e(t){if(Array.isArray(t))return t.map(e);if(t&&"object"===Object(n["a"])(t)){for(var r={},u=Object.keys(t),l=0,o=u.length;l<o;l++){var i=u[l];r[i]=e(t[i])}return r}return t}),v=p,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"condition-builder-children",class:"depth-"+e.depth.toString()},e._l(e.query.children,(function(t,n){return r(e.getComponent(t.type),{key:n,tag:"component",attrs:{type:t.type,query:t.query,"rule-types":e.ruleTypes,rules:e.rules,rule:e.$parent.ruleById(t.query.rule),index:n,"max-depth":e.maxDepth,depth:e.depth+1,labels:e.labels},on:{"update:query":function(r){return e.$set(t,"query",r)},"child-deletion-requested":e.$parent.removeChild}})})),1)},f=[],h={props:["query","ruleTypes","rules","maxDepth","labels","depth"],data:function(){return{groupComponent:null,ruleComponent:null}},mounted:function(){this.groupComponent=this.$parent.$options.components["ConditionBuilderGroup"],this.ruleComponent=this.$parent.$options.components["ConditionBuilderRule"]},methods:{getComponent:function(e){return"condition-builder-group"===e?this.groupComponent:this.ruleComponent}}},m=h,b=r("2877"),g=Object(b["a"])(m,y,f,!1,null,null,null),q=g.exports,_={components:{ConditionBuilderChildren:q},props:{ruleTypes:Object,type:{type:String,default:"condition-builder-group"},query:Object,rules:Array,index:Number,maxDepth:Number,maxGroups:Number,depth:Number,labels:Object},data:function(){return{selectedRule:this.rules[0]}},methods:{ruleById:function(e){var t=null;return this.rules.forEach((function(r){if(r.id===e)return t=r,!1})),t},addRule:function(){var e=v(this.query),t={type:"condition-builder-rule",query:{rule:this.selectedRule.id,operator:this.selectedRule.operators[0],operand:"undefined"===typeof this.selectedRule.operands?this.selectedRule.label:this.selectedRule.operands[0],value:null}};"multi-select"===this.ruleById(t.query.rule).type&&(t.query.value=[]),e.children.push(t),this.$emit("update:query",e)},addGroup:function(){var e=v(this.query);this.depth<this.maxDepth&&(e.children.push({type:"condition-builder-group",query:{logicalOperator:this.labels.matchTypes[0].id,children:[]}}),this.$emit("update:query",e))},onChangeAdd:function(e){"addRule"==e.target.value&&this.addRule(),"addGroup"==e.target.value&&this.addGroup(),e.target.value=""},remove:function(){this.$emit("child-deletion-requested",this.index)},removeChild:function(e){var t=v(this.query);t.children.splice(e,1),this.$emit("update:query",t)}}},x=_,w=Object(b["a"])(x,d,c,!1,null,null,null),O=w.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"condition-builder-rule tw-flex",class:e.classes},[r("div",{staticClass:"condition-builder-rule-input tw-flex-grow tw-py-2"},[r("div",{staticClass:"tw-flex"},[r("div",[r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.rule,expression:"rule"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.rule=t.target.multiple?r:r[0]}}},e._l(e.rules,(function(t){return r("option",{key:t.id,domProps:{value:t}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),0)])]),r("div",["undefined"!==typeof e.rule.operands?r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.query.operand,expression:"query.operand"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.query,"operand",t.target.multiple?r:r[0])}}},e._l(e.rule.operands,(function(t){return r("option",{key:t},[e._v("\n              "+e._s(t)+"\n            ")])})),0)]):e._e(),"undefined"!==typeof e.rule.operators&&e.rule.operators.length>1?r("div",{staticClass:"select"},["undefined"!==typeof e.rule.operators&&e.rule.operators.length>1?r("select",{directives:[{name:"model",rawName:"v-model",value:e.query.operator,expression:"query.operator"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.query,"operator",t.target.multiple?r:r[0])}}},e._l(e.rule.operators,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v("\n              "+e._s(t)+"\n            ")])})),0):e._e()]):e._e(),"text"===e.rule.inputType?r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],attrs:{type:"text",placeholder:e.labels.textInputPlaceholder},domProps:{value:e.query.value},on:{input:function(t){t.target.composing||e.$set(e.query,"value",t.target.value)}}}):e._e(),"number"===e.rule.inputType?r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],attrs:{type:"number"},domProps:{value:e.query.value},on:{input:function(t){t.target.composing||e.$set(e.query,"value",t.target.value)}}}):e._e(),"date"===e.rule.inputType?r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],attrs:{type:"date"},domProps:{value:e.query.value},on:{input:function(t){t.target.composing||e.$set(e.query,"value",t.target.value)}}}):e._e(),e.isCustomComponent?r("div",{staticClass:"conditionbuilder-custom-component-wrap"},[r(e.rule.component,{tag:"component",attrs:{value:e.query.value},on:{input:e.updateQuery}})],1):e._e(),"checkbox"===e.rule.inputType?e._l(e.rule.choices,(function(t){return r("div",{key:t.value},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],attrs:{id:"depth"+e.depth+"-"+e.rule.id+"-"+e.index+"-"+t.value,type:"checkbox"},domProps:{value:t.value,checked:Array.isArray(e.query.value)?e._i(e.query.value,t.value)>-1:e.query.value},on:{change:function(r){var n=e.query.value,u=r.target,l=!!u.checked;if(Array.isArray(n)){var o=t.value,i=e._i(n,o);u.checked?i<0&&e.$set(e.query,"value",n.concat([o])):i>-1&&e.$set(e.query,"value",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.query,"value",l)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"depth"+e.depth+"-"+e.rule.id+"-"+e.index+"-"+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])])})):e._e(),"radio"===e.rule.inputType?e._l(e.rule.choices,(function(t){return r("div",{key:t.value},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],attrs:{id:"depth"+e.depth+"-"+e.rule.id+"-"+e.index+"-"+t.value,name:"depth"+e.depth+"-"+e.rule.id+"-"+e.index,type:"radio"},domProps:{value:t.value,checked:e._q(e.query.value,t.value)},on:{change:function(r){return e.$set(e.query,"value",t.value)}}}),r("label",{attrs:{for:"depth"+e.depth+"-"+e.rule.id+"-"+e.index+"-"+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])])})):e._e(),"select"!==e.rule.inputType||e.hasOptionGroups?e._e():r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],attrs:{multiple:"multi-select"===e.rule.type},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.query,"value",t.target.multiple?r:r[0])}}},e._l(e.selectOptions,(function(t){return r("option",{key:t.value,domProps:{value:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),0)]),"select"===e.rule.inputType&&e.hasOptionGroups?r("div",[r("select",{directives:[{name:"model",rawName:"v-model",value:e.query.value,expression:"query.value"}],attrs:{multiple:"multi-select"===e.rule.type},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.query,"value",t.target.multiple?r:r[0])}}},e._l(e.selectOptions,(function(t,n){return r("optgroup",{key:n,attrs:{label:n}},e._l(t,(function(t){return r("option",{key:t.value,domProps:{value:t.value}},[e._v("\n                "+e._s(t.label)+"\n              ")])})),0)})),0)]):e._e()],2)])]),r("div",{staticClass:"condition-builder-rule-delete"},[r("a",{staticClass:"delete icon tw-p-3",attrs:{title:e.labels.removeRule,role:"button",href:"#"},on:{click:e.remove}})])])},$=[],k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},T=[],j=(r("13d5"),{props:["query","index","rule","labels","depth","rules"],computed:{isCustomComponent:function(){return"custom-component"===this.rule.type},selectOptions:function(){return"undefined"===typeof this.rule.choices?{}:this.rule.choices.reduce((function(e,t,r){var n=t["group"];return"undefined"!==typeof n?(e[n]=e[n]||[],e[n].push(t)):e[r]=t,e}),{})},hasOptionGroups:function(){return this.selectOptions.length&&Array.isArray(this.selectOptions[0])}},beforeMount:function(){"custom-component"===this.rule.type&&(this.$options.components[this.id]=this.rule.component)},mounted:function(){var e=v(this.query);null===this.query.value&&("checkbox"===this.rule.inputType&&(e.value=[]),"select"===this.rule.type&&(e.value=this.rule.choices[0].value),"custom-component"===this.rule.type&&(e.value=null,"undefined"!==typeof this.rule.default&&(e.value=v(this.rule.default))),this.$emit("update:query",e))},methods:{remove:function(){this.$emit("child-deletion-requested",this.index)},updateQuery:function(e){var t=v(this.query);t.value=e,this.$emit("update:query",t)}}}),A=j,N=Object(b["a"])(A,k,T,!1,null,null,null),P=N.exports,R={extends:P,computed:{classes:function(){var e=["tw-border-craft-yellow-600","tw-border-craft-blue-600","tw-border-craft-purple-600","tw-border-craft-green-600","tw-border-craft-yellow-600"];return e[this.depth-1]}}},S=R,G=(r("0c1e"),Object(b["a"])(S,C,$,!1,null,null,null)),B=G.exports,D={name:"ConditionBuilderGroup",components:{ConditionBuilderRule:B},computed:{classes:function(){var e=["tw-border-craft-yellow-600","tw-border-craft-blue-600","tw-border-craft-purple-600","tw-border-craft-green-600","tw-border-craft-yellow-600"];return e[this.depth-1]}},extends:O},E=D,M=(r("c75c"),Object(b["a"])(E,a,s,!1,null,null,null)),J=M.exports,F={matchTypes:[{id:"all",label:"And"},{id:"any",label:"Or"}],addRule:"Add Rule",removeRule:"Delete Rule",addGroup:"Add Group",removeGroup:"Delete Group",textInputPlaceholder:"value"},V={name:"ConditionBuilder",components:{ConditionBuilderGroup:J},props:{rules:Array,labels:{type:Object,default:function(){return F}},maxDepth:{type:Number,default:1,validator:function(e){return e>=1}},value:Object},data:function(){return{query:{logicalOperator:this.labels.matchTypes[0].id,children:[]},ruleTypes:{text:{operators:["equals","does not equal","contains","does not contain","is empty","is not empty","begins with","ends with"],inputType:"text",id:"text-field"},numeric:{operators:["=","<>","<","<=",">",">="],inputType:"number",id:"number-field"},custom:{operators:[],inputType:"text",id:"custom-field"},radio:{operators:[],choices:[],inputType:"radio",id:"radio-field"},checkbox:{operators:[],choices:[],inputType:"checkbox",id:"checkbox-field"},select:{operators:[],choices:[],inputType:"select",id:"select-field"},"multi-select":{operators:["="],choices:[],inputType:"select",id:"multi-select-field"}}}},computed:{mergedLabels:function(){return Object.assign({},F,this.labels)},mergedRules:function(){var e=[],t=this;return t.rules.forEach((function(r){"undefined"!==typeof t.ruleTypes[r.type]?e.push(Object.assign({},t.ruleTypes[r.type],r)):e.push(r)})),e},conditionBuilderProps:function(){return{index:0,depth:1,maxDepth:this.maxDepth,ruleTypes:this.ruleTypes,rules:this.mergedRules,labels:this.mergedLabels}}},mounted:function(){var e=this;this.$watch("query",(function(t){console.log(JSON.stringify(t,null,2)),JSON.stringify(t)!==JSON.stringify(e.value)&&e.$emit("input",v(t))}),{deep:!0}),this.$watch("value",(function(t){JSON.stringify(t)!==JSON.stringify(e.query)&&(e.query=v(t))}),{deep:!0}),"undefined"!==typeof this.$options.propsData.value&&(this.query=Object.assign(this.query,this.$options.propsData.value))}},I=V,L=(r("340f"),Object(b["a"])(I,o,i,!1,null,null,null)),Q=L.exports;l.a.filter("t",(function(e){return Craft.t(e)}));var U=l.a.component("custom-input",{props:["value"],template:'\n      <input v-bind:value="value" v-on:input="$emit(\'input\', $event.target.value)">\n    '});Craft.VueConditionBuilder=Garnish.Base.extend({init:function(e){this.setSettings(e,Craft.VueConditionBuilder.defaults),0==this.settings.rules.length&&(this.settings.rules=[{type:"custom-component",id:"slider",label:"Slider",operators:[],component:U},{type:"custom-component",id:"my-condition",label:"My Condiditon",operators:[],component:"./component/Slider"},{type:"text",id:"vegetable",label:"Vegetable"},{type:"text",id:"another",label:"Another One",default:"1,2,3"},{type:"radio",id:"fruit",label:"Fruit",choices:[{label:"Apple",value:"apple"},{label:"Banana",value:"banana"}]}]),this.settings.query={logicalOperator:"all",children:[{type:"condition-builder-rule",query:{rule:"slider",operand:"Slider",value:null}},{type:"condition-builder-rule",query:{rule:"vegetable",operator:"equals",operand:"Vegetable",value:"esafewqrew"}},{type:"condition-builder-rule",query:{rule:"my-condition",operand:"My Condiditon",value:"rewqrew"}},{type:"condition-builder-rule",query:{rule:"fruit",operand:"Fruit",value:"banana"}},{type:"condition-builder-rule",query:{rule:"another",operator:"does not contain",operand:"Another One",value:"rewqrewqrew"}},{type:"condition-builder-group",query:{logicalOperator:"all",children:[{type:"condition-builder-group",query:{logicalOperator:"all",children:[{type:"condition-builder-rule",query:{rule:"slider",operand:"Slider",value:null}},{type:"condition-builder-rule",query:{rule:"slider",operand:"Slider",value:null}},{type:"condition-builder-rule",query:{rule:"my-condition",operand:"My Condiditon",value:null}}]}},{type:"condition-builder-group",query:{logicalOperator:"all",children:[{type:"condition-builder-rule",query:{rule:"slider",operand:"Slider",value:null}},{type:"condition-builder-rule",query:{rule:"slider",operand:"Slider",value:null}},{type:"condition-builder-rule",query:{rule:"vegetable",operator:"equals",operand:"Vegetable",value:null}},{type:"condition-builder-rule",query:{rule:"fruit",operand:"Fruit",value:null}}]}},{type:"condition-builder-rule",query:{rule:"fruit",operand:"Fruit",value:null}}]}},{type:"condition-builder-rule",query:{rule:"fruit",operand:"Fruit",value:null}}]};var t=this.settings,u=t.rules.map((function(e){var t=Object(n["a"])(e.component);return"string"==t&&(e["component"]=l.a.component(e.id,(function(){return r("b549")(e.component)}))),e}));return t.rules=u,t.value=t.query,new l.a({components:{ConditionBuilder:Q},data:function(){return{}},render:function(e){return e(Q,{props:t})}}).$mount(this.settings.container)}},{defaults:{rules:[],query:{},container:null,maxDepth:3}})},"8bbf":function(e,t){e.exports=Vue},"980e":function(e,t,r){},b549:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="b549"},b653:function(e,t,r){},bf8a:function(e,t,r){},c75c:function(e,t,r){"use strict";var n=r("bf8a"),u=r.n(n);u.a}});
//# sourceMappingURL=app.js.map