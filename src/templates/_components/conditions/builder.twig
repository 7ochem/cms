<script src="https://unpkg.com/htmx.org@1.5.0/dist/htmx.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

{{ craft.app.conditions.createCondition({'type': type}).getBuilderHtml()|raw }}

{% js %}
document.body.addEventListener('htmx:configRequest', function(evt) {
    evt.detail.headers = {...evt.detail.headers, ...Craft._actionHeaders()};
    //console.log(evt.detail);
});

document.body.addEventListener('htmx:beforeOnLoad', function(evt) {
    console.log(evt);
});


htmx.onLoad(function(content) {
    var sortables = content.querySelectorAll(".sortable");
    for (var i = 0; i < sortables.length; i++) {
        var sortable = sortables[i];
        new Sortable(sortable, {
            animation: 150,
            draggable: '.draggable',
            handle: '.draggable-handle',
            direction: 'vertical',
        });
    }
})
{% endjs %}
